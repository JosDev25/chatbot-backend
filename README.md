# AI Chat Assistant SPA - Backend

![Project Status](https://img.shields.io/badge/STATUS-DEPLOYED-green)

## Table of Contents
1. [Project Description](#project-description)
2. [Main Features](#main-features)
3. [System Architecture](#system-architecture)
4. [Technologies Used](#technologies-used)
5. [Prerequisites](#prerequisites)
6. [Installation and Execution](#installation-and-execution)
7. [Main Endpoints](#main-endpoints)
8. [Contact](#contact)

## Project Description
The **AI Chat Assistant SPA** is an application designed to provide users with a seamless chat experience with an artificial intelligence assistant. This repository contains the backend of the project, developed to manage business logic, user authentication, message processing, and interaction with the OpenAI API.

## Main Features
- **User Management**: Registration, login, and session handling for users, including support for anonymous users with specific limitations.
- **Message Processing**: Reception and validation of user messages, filtering inappropriate content, and managing responses through the OpenAI API.
- **Chat History**: Storage and retrieval of conversation history for registered users.
- **Cost Optimization**: Implementation of strategies to minimize token usage and, consequently, costs associated with consuming the OpenAI API.

## System Architecture
The backend system architecture is defined by its interactions with external entities, as illustrated in the Context Diagram (Figure 1), and by its internal structure, detailed in the Container Diagram (Figure 2).


![Untitled (17)](https://github.com/user-attachments/assets/f81928a6-b5e5-49cf-83fd-b59eda64d72c)


*Figure 1: Context Diagram*

And a container diagram showing the internal structure of the backend:

![Untitled (18)](https://github.com/user-attachments/assets/ab659d4d-fa89-4022-a131-c233b3e5f8ac)


*Figure 2: Container Diagram*

## Technologies Used
- **FastAPI**: Modern, high-performance framework for building APIs with Python.
- **MongoDB (Atlas)**: NoSQL database used to store information on users, sessions, and chats.
- **Uvicorn**: Lightweight and fast ASGI server to run FastAPI applications.
- **Render**: Platform used for deploying the backend in a production environment.

## Prerequisites

Before installing and running the project, ensure you have the following components installed:

- **Python 3.8 or higher:** Required for running the backend application.
- **MongoDB Atlas:** An account and a configured cluster.
- **OpenAI API Key:** A valid OpenAI account and API key are required to use the AI assistant functionality. You can obtain your API key from the OpenAI website.
- **Git:** To clone the repository.
- **Dependencies:** All required Python packages are listed in `requirements.txt`

## Installation and Execution
Follow these steps to set up and run the backend in your local environment:

1. **Clone this repository**:
   ```bash
   git clone https://github.com/JosDev25/chatbot-backend.git
2. **Install Dependencies**:
   ```bash
   pip install -r requirements.txt
3. **Set Enviroment variables**
Create a .env file

4. **Run the application**
   ```bash
   uvicorn main:app --reload
 
 The API will be available at localhost:8000

## Main Endpoints

Below are the most relevant endpoints of the backend:

- **POST /session:** Creates a new session.
- **POST /login:** Authenticates registered users and returns an access token.
- **POST /chat:** Processes the user's message and returns the response generated by the AI assistant.
- **GET /history:** Retrieves the chat history of the authenticated user.
    * Query parameters: `email` and `session_id`. Example: `/history?email=user@example.com&session_id=1234567890`.
- **POST /register:** Allows new users to register by providing an email and password.
    * Query parameter: `session_id`. Example: `/register?session_id=1234567890`.
- **GET /api_calls:** Retrieves the number of api calls of the authenticated user.
    * Query parameter: `session_id`. Example: `/api_calls?session_id=1234567890`.

For more details on each endpoint, consult the interactive documentation generated by FastAPI at `http://localhost:8000/docs` or `http://localhost:8000/redoc`.


## Contact

Developed by JosDev25(eJosR-Coding).
